function number_format(e,t,s,a){var r=e,i=isNaN(t=Math.abs(t))?2:t,d=void 0==s?",":s,o=void 0==a?".":a,c=r<0?"-":"",n=parseInt(r=Math.abs(+r||0).toFixed(i))+"",m=(m=n.length)>3?m%3:0;return c+(m?n.substr(0,m)+o:"")+n.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+o)+(i?d+Math.abs(r-n).toFixed(i).slice(2):"")}$(function(){var e={},t=$(location).attr("origin"),s=$($("script")[1]).attr("src").replace(/\/js\/.*/,""),a=t+s+"/servicesDays/listNonServicesDays.json";$.ajax({method:"get",url:a,success:function(t){var s=t.nonServicesDays;for(var a in s)s.hasOwnProperty(a)&&(e[new Date(s[a])]=new Date(s[a]));$("#datepicker").datetimepicker({beforeShowDay:function(t){return e[t]?[!1,""]:[!0,"",""]},minDate:new Date,controlType:"select",timeFormat:"HH:mm",dateFormat:"yy-mm-dd",timeText:"Idő",hourText:"Óra",minuteText:"Perc",secondText:"Másodperc",currentText:"Ma",closeText:"Ok",hourMin:10,hourMax:17,showSecond:!1,showMillisec:!1,showMicrosec:!1})}});var r;$(".cart").mouseenter(function(){clearTimeout(r),$("#cart").slideDown()}).mouseleave(function(){clearTimeout(r),r=setTimeout("showCart()",2250)}),showCart=function(){$("#cart").slideUp()},$("button").click(function(){if("main-service"==$(this).attr("id"))return $("#datepicker").val()?$("#services-1-joindata-full-price-members").val()+$("#services-1-joindata-discount-price-members").val()?($(".extra").fadeIn(1250),void $(this).hide()):void $("#services-1-joindata-full-price-members").effect("shake").notify("Kérem adja meg hányan vannak a csoportban","error"):void $("#datepicker").effect("shake").notify("Kérem válasszon dátumot a látogatáshoz","error");if(4==$(this).data("type-id"))return $(this).toggleClass("success"),void $(this).closest(".service").toggleClass("selected");var e=$('button[data-type-id="'+$(this).data("type-id")+'"]'),t=e.closest(".service");$(this).hasClass("success")?(e.removeClass("success"),t.removeClass("faded"),$(this).closest(".service").removeClass("selected")):($(this).addClass("success"),t.addClass("faded").removeClass("selected"),$(this).closest(".service").removeClass("faded").addClass("selected"))});var i=function(){var e="",t=0,s=0;$("*[data-service]").each(function(){if($(this).val()){var a=$(this).data("price-full")?$(this).data("price-full"):$(this).data("price-discount"),r=$(this).val()*a;t+=r,e+="<dd>"+$(this).data("service")+": "+$(this).val()+" fő * "+number_format(a,0)+" Ft</dd><dt>"+number_format(r,0)+" Ft</dt>",s=s?s:s+$(this).data("minutes"),$(".service-main").addClass("selected")}if($(this).hasClass("success")){var i=$(this).data("price-full"),d=$(this).data("price-discount"),o=$("#services-1-joindata-full-price-members").val();o&&(t+=i*o,e+="<dd>"+$(this).data("service")+": "+o+" fő * "+number_format(i,0)+" Ft</dd><dt>"+number_format(i*o,0)+" Ft</dt>");var c=$("#services-1-joindata-discount-price-members").val();c&&(t+=d*c,e+="<dd>"+$(this).data("service")+": "+c+" fő * "+number_format(d,0)+" Ft</dd><dt>"+number_format(d*c,0)+" Ft</dt>"),s+=$(this).data("minutes")}}),e+='<dt class="b">Összesen: '+number_format(t,0)+" Ft</dt>",e+="<dd>A programhoz szükséges idő</dd><dt>"+number_format(s/60,1)+" óra</dt>",$("#summary").html(e),(t||11!=$('#order button[type="submit"]').text().length)&&($('#order button[type="submit"]').text("Megrendelem "+number_format(t,0)+" Ft ("+number_format(s/60,1)+" óra)"),$("#main-service").is(":hidden")&&$('#order button[type="submit"]').hide().fadeIn())};$("input[data-service]").on("blur",i),$("button[data-service]").on("click",i),$("#order").submit(function(e){e.preventDefault()})});